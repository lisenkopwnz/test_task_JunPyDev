# Система управления заказами в кафе  
  
## Описание проекта  
  
Это веб-приложение на Django для управления заказами в кафе. Оно позволяет:  
  
- Создавать, редактировать, удалять и просматривать заказы.  
      
- Управлять блюдами в меню.  
      
- Фильтровать заказы по номеру стола и статусу.  
      
- Рассчитывать выручку за смену.  
      
- Закрывать смену и сохранять данные о выручке.  
      
  
Проект включает REST API для интеграции с другими системами.  
  
----------  
  
## Функциональные возможности  
  
### Управление заказами  
  
-   **Создание заказа**: Добавление нового заказа с указанием номера стола, списка блюд и их количества.  
      
-   **Редактирование заказа**: Изменение статуса заказа, добавление или удаление блюд.  
      
-   **Удаление заказа**: Удаление заказа по его ID.  
      
-   **Поиск заказов**: Фильтрация заказов по номеру стола и статусу.  
      
-   **Просмотр заказов**: Отображение всех заказов в виде таблицы.  
      
  
### Управление меню  
  
-   **Добавление блюда**: Создание нового блюда с указанием названия, цены и описания.  
      
-   **Редактирование блюда**: Изменение данных о блюде.  
      
-   **Удаление блюда**: Удаление блюда из меню.  
      
  
### Финансовый модуль  
  
-   **Расчет выручки**: Автоматический расчет выручки за текущую смену.  
      
-   **Закрытие смены**: Сохранение данных о выручке за смену.  
      
  
### REST API  
  
- Получение списка заказов.  
      
- Создание, обновление и удаление заказов.  
      
- Управление блюдами.  
      
- Расчет и сохранение выручки.  
      
  
----------  
  
## Установка и настройка  
  
### Требования  
  
- Python 3.8+  
      
- Docker  
      
- PostgreSQL  
      
  
### Установка  
  
1.  **Клонируйте репозиторий**:    
    git clone  https://github.com/lisenkopwnz/test_task_JunPyDev
2. 
    cd cafe_order_system  
      
2.  **Создайте виртуальное окружение**:    
    python -m venv venv    
    source venv/bin/activate # Для Linux/MacOS    
    venv\Scripts\activate # Для Windows  
      
3.  **Установите зависимости**:    
    pip install -r requirements.txt  
      
4.  **Настройте базу данных**:  
      
    - Создайте файл .env в корне проекта и добавьте свои настройки для PostgreSQL иначе будут использованы настройки по умолчанию:    
        POSTGRES_DB=mydatabase    
        POSTGRES_USER=myuser    
        POSTGRES_PASSWORD=mypassword    
        POSTGRES_HOST=db    
        POSTGRES_PORT=5432  
  
----------  
  
### Запуск через Docker  
  
1.  **Соберите и запустите контейнеры**:    
    docker-compose up --build  
      
2.  **Примените миграции**:    
    миграции а также фикстуры (тестовые данные для базы данных) создаются и загружаются автоматически (см. файл .sh)  
      
3.  **Откройте приложение**:    
    Перейдите по адресу  http://127.0.0.1:8000/order/.  
      
  
----------  
  
## Использование  
  
### Веб-интерфейс  
  
-   **Главная страница**: Отображает список заказов.  
      
-   **Создание заказа**: Перейдите по ссылке "Создать заказ" и заполните форму.  
      
-   **Редактирование заказа**: Нажмите на заказ в списке и измените его данные.  
      
-   **Удаление заказа**: Нажмите кнопку "Удалить" рядом с заказом.  
      
-   **Меню**: Управление блюдами доступно через раздел "Меню".  
      
-   **Финансы**: Расчет выручки и закрытие смены доступны в разделе "Финансы".  
      
  
### REST API  
  
-   **Список заказов**: GET /api/order_list/  
      
-   **Детали заказа**: GET /api/order/<id>/  
      
-   **Создание заказа**: POST /api/order/create/  
      
-   **Обновление заказа**: PUT /api/order/update/<id>/  
      
-   **Удаление заказа**: DELETE /api/order/delete/<id>/  
      
-   **Список блюд**: GET /api/dish/  
      
-   **Создание блюда**: POST /api/dish/  
      
-   **Обновление блюда**: PUT /api/dish/<id>/  
      
-   **Удаление блюда**: DELETE /api/dish/<id>/  
      
-   **Расчет выручки**: GET /api_calculate_revenue/  
      
-   **Закрытие смены**: POST /api_close_shift/  
      
  
----------  
  
## Тестирование  
  
Для входа в контейнер выполните:    
docker exec -it order_system bash  
  
Запустите тесты  
pytest
